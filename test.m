function flag=test(sensor_link_fog)
% 检查个体是否满足距离约束
% code    输入参数     
% flag    output    是否满足要求标志
  
%总任务量3490
sensor_task = [43  ,  44 ,   25   , 35  ,  33   , 40    ,41 ,   43,    28  ,  41  ,  40 ,   25 ,   23  ,  35   , 49   , 30  ,  38  ,  26  ,  43  ,  27 ,   35  ,  41 ,   47 ,   49  ,  36 ,   24   , 24,    27 ,   46,    27  ,  45 ,   27  ,  48   , 30   , 26  ,  27  ,  39  ,  34 ,   30  ,  45  ,  38  ,  37   , 48    ,28   , 43  ,  43  ,  31 ,   37  ,  22  ,  21  ,  36 ,   44,    48   , 24,  37 ,   34    ,20   , 30  ,  25    ,44    ,29,    36    ,25   , 38   , 28    ,40 ,   41  ,  43  ,  33  ,  22    ,27   , 48 ,   24  ,  45  ,  36 ,   50, 44  ,  45,    46   , 22  ,  32  ,  28 ,   44   ,  33  ,  48   , 25   , 28    ,24   , 24 ,   46    ,37    ,37 ,   24   , 46  ,  39,    22  ,  33  ,  23  ,  49 ,   20,   44  ,  45 ,   46  ,  22  ,  32,    28 ,   44  ,  33  ,  48,    25  ,  28,    24 ,   24  ,  46  ,  37  ,  37,    24  ,  46  ,  39];%100个传感器的任务量

% 任务处理速度、雾设备容量、雾设备连接数
fog_capacity = [ 651  , 532  , 661,   624 ,  689 ,  575   ,593,   548  , 505   ,596,   633   ,643 ,  700 ,  571,   566  , 504  , 599  , 638  , 597 ,  510];%雾设备可以处理的任务量
fog_limit = [ 15  ,  14  ,  13  ,  13   , 14    ,11   , 15   , 14    ,14   , 10   , 12   , 15   , 10   , 13   , 13   , 12  ,  14   , 15  ,  15,    14];%雾设备的连接数
fog_speed  = [  7   ,  4  ,   4 ,    5 ,    7   ,  3   ,  5   ,  7  ,   7   ,  4  ,   7    , 6     ,5  ,   3     ,7  ,   3  ,   4   ,  7,     7 ,    7];




%测试1：雾设备容量相同的情况下，保证冗余为20% 总任务量 3490 × 1.2 = 4188 约等于4200 故每台雾设备的容量为4200
%%fog_capacity = [ 651  , 532  , 661,   624 ,  689 ,  575   ,593,   548  , 505   ,596,   633   ,643 ,  700 ,  571,   566  , 504  , 599  , 638  , 597 ,  510];%雾设备可以处理的任务量
%fog_capacity = [ 420  , 420  , 420,   420 ,  420 ,  420   ,420,   420  , 420   ,420,   420   ,420 ,  420 ,  420,   420  , 420  , 420  , 420  , 420 ,  420];%雾设备可以处理的任务量
%fog_limit = [ 15  ,  14  ,  13  ,  13   , 14    ,11   , 15   , 14    ,14   , 10   , 12   , 15   , 10   , 13   , 13   , 12  ,  14   , 15  ,  15,    14];%雾设备的连接数
%fog_speed  = [  7   ,  4  ,   4 ,    5 ,    7   ,  3   ,  5   ,  7  ,   7   ,  4  ,   7    , 6     ,5  ,   3     ,7  ,   3  ,   4   ,  7,     7 ,    7];

  
%测试2：雾设备 连接数相同的情况下，保证冗余为20% 雾设备总数 00 × 1.2 = 120  故每台雾设备的连接数为12
%fog_capacity = [ 651  , 532  , 661,   624 ,  689 ,  575   ,593,   548  , 505   ,596,   633   ,643 ,  700 ,  571,   566  , 504  , 599  , 638  , 597 ,  510];%雾设备可以处理的任务量
%fog_limit = [ 12  ,  12  ,  12  ,  12   , 12    ,12   , 12   , 12    ,12   , 12   , 12   , 12   , 12   , 12   , 12   , 12  ,  12   , 12  ,  12,    12];%雾设备的连接数
%%fog_limit = [ 15  ,  14  ,  13  ,  13   , 14    ,11   , 15   , 14    ,14   , 10   , 12   , 15   , 10   , 13   , 13   , 12  ,  14   , 15  ,  15,    14];%雾设备的连接数

%fog_speed  = [  7   ,  4  ,   4 ,    5 ,    7   ,  3   ,  5   ,  7  ,   7   ,  4  ,   7    , 6     ,5  ,   3     ,7  ,   3  ,   4   ,  7,     7 ,    7];
  

% D：传感器设备设置的延迟 5- 10
% V ：不同雾设备处理任务的速度 3-7
% Task：传感器设备的任务量 25-50

%测试3：雾设备 单位时间内处理速度相同的情况下，总任务3490 ，处理速度设置为7
%fog_capacity = [ 651  , 532  , 661,   624 ,  689 ,  575   ,593,   548  , 505   ,596,   633   ,643 ,  700 ,  571,   566  , 504  , 599  , 638  , 597 ,  510];%雾设备可以处理的任务量
%fog_limit = [ 15  ,  14  ,  13  ,  13   , 14    ,11   , 15   , 14    ,14   , 10   , 12   , 15   , 10   , 13   , 13   , 12  ,  14   , 15  ,  15,    14];%雾设备的连接数
%%fog_speed  = [  7   ,  4  ,   4 ,    5 ,    7   ,  3   ,  5   ,  7  ,   7   ,  4  ,   7    , 6     ,5  ,   3     ,7  ,   3  ,   4   ,  7,     7 ,    7];
%fog_speed  = [  7   ,  7   ,   7  ,    7  ,    7   ,  7    ,  7    ,  7  ,   7   ,  7   ,   7    , 7      ,7   ,   7      ,7  ,   7   ,   7    ,  7,     7 ,    7];



%fog_num = [ 10  ,   7 ,   15 ,   19 ,    6  ,  13 ,    3  ,  18  ,  16 ,    4];
%sensor_link_to_fog = [  3  ,   6  ,   4   , 13  ,   6   , 13  ,  13  ,  10,    16  ,   6  ,   7  ,   6  ,  13 ,   10  ,   3 ,   19  ,  18  ,  13 ,    6,    15 ,   13  ,  13  ,  16  ,  10  ,  10  ,  18  ,   7, 4   ,  4    ,19   , 19  ,  18 ,   15 ,   15  ,   7  ,  10,    13 ,   19   , 15 ,    6  ,  10 ,   13  ,   7   , 10   , 13,    19 ,    6  ,   3  ,   6   ,  3    ,18    ,15  ,  18 ,    7,4  ,  13   , 10  ,   7   , 15 ,   10,     7,    10  ,  10   ,  3 ,   15  ,  18   , 16  ,   3   , 10     ,6    ,19  ,  13 ,   13   , 18 ,    4    ,19 ,   18  ,   6    ,19  ,  10  ,   7,  4 ,    7   ,  4   , 15    , 7,     3   ,  4    ,13   , 19  ,   6  ,   6   , 19   ,  3   ,  4  ,  19 ,    7 ,    7 ,   19,    13];
flag=1;
%连接数限制、容量限制

fog_receive = zeros(1,20);
fog_number = zeros(1,20);
for i = 1:100
   
  
   fog_receive(sensor_link_fog(i)) = fog_receive(sensor_link_fog(i))+sensor_task(i);
   fog_number(sensor_link_fog(i)) = fog_number(sensor_link_fog(i))+1;
end




% 有一条满足，即为0,连接数约束、容量约束
for i = 1:20
    if  fog_limit(i)<fog_number(i) || fog_capacity(i)< fog_receive(i)
        flag = 0;
        break;
    end
        
end
   
% D：传感器设备设置的延迟 5- 10
% V ：不同雾设备处理任务的速度 3-7
% Task：传感器设备的任务量 25-50
%sensor_task = [43  ,  44 ,   25   , 35  ,  33   , 40    ,41 ,   43,    28  ,  41  ,  40 ,   25 ,   23  ,  35   , 49   , 30  ,  38  ,  26  ,  43  ,  27 ,   35  ,  41 ,   47 ,   49  ,  36 ,   24   , 24,    27 ,   46,    27  ,  45 ,   27  ,  48   , 30   , 26  ,  27  ,  39  ,  34 ,   30  ,  45  ,  38  ,  37   , 48    ,28   , 43  ,  43  ,  31 ,   37  ,  22  ,  21  ,  36 ,   44,    48   , 24,  37 ,   34    ,20   , 30  ,  25    ,44    ,29,    36    ,25   , 38   , 28    ,40 ,   41  ,  43  ,  33  ,  22    ,27   , 48 ,   24  ,  45  ,  36 ,   50, 44  ,  45,    46   , 22  ,  32  ,  28 ,   44   ,  33  ,  48   , 25   , 28    ,24   , 24 ,   46    ,37    ,37 ,   24   , 46  ,  39,    22  ,  33  ,  23  ,  49 ,   20,   44  ,  45 ,   46  ,  22  ,  32,    28 ,   44  ,  33  ,  48,    25  ,  28,    24 ,   24  ,  46  ,  37  ,  37,    24  ,  46  ,  39];%100个传感器的任务量
%fog_speed  = [  7   ,  7 ,   7 ,   7 ,    7   , 7   ,  7   ,  7  ,   7   ,  7  ,   7    , 7     ,7  ,  7     ,7  ,   7  ,   7   ,  7,     7 ,    7];

sensor_delay = [8   ,  8    , 9  ,   9   , 10  ,   9    , 8  ,   8 ,    7     ,5    ,10,     5  ,   9  ,  10  ,   5    , 5    , 7   ,  5  ,   8    , 9 ,    9   ,  6    , 5  ,   6    , 6    ,10  ,   6, 5   ,  5,    10  ,   9   ,  9   ,  8    , 5  ,  10   ,  7    , 9  ,   8   ,  5  ,   5   ,  8   , 10 ,    8   ,  7    , 7     ,9    , 9   ,  7     ,9   ,  5   ,  6    ,10    ,10 ,    7,10   ,  9  ,   6  ,   8  ,  10 ,    5  ,   7  ,   5   ,  6    , 9    , 9    , 5   ,  7    ,10   ,  7   , 10    , 6 ,    7 ,    8  ,   5   ,  9    , 8 ,    6   ,  6  ,   6  ,  10  ,  10,6,    10 ,    8   ,  6  ,   7    , 6  ,   9 ,    9   , 10  ,   8   ,  8   , 10 ,    7  ,  10,     7 ,    8 ,   10   ,  9 ,    5];
%sensor_delay = [10   ,  10    , 10  ,   10   , 10  ,   10    , 10  ,   10 ,    10    ,10    ,10,     10  ,   10  ,  10  ,   10    , 10    , 10   ,  10  ,   10    , 10 ,    10   , 10    , 10  ,   10    , 10    ,10  ,   10, 10   ,  10,    10  ,  10   ,  10  ,  10    , 10  ,  10   ,  10    , 10  ,   10   ,10  ,   10   ,  10   , 10 ,    10   ,  10   , 10    ,10    , 10   ,  10    ,10  ,  10   ,  10    ,10    ,10 ,    10,10   ,  10  ,   10  ,   10  ,  10 ,   10  ,   10  ,   10   ,  10    , 10    , 10   , 10  ,  10    ,10   ,  10   , 10    , 10,     10,   10  ,    10  , 10   , 10 ,     10  ,   10  ,   10  ,  10  ,  10, 10,    10 ,     10  ,   10  ,    10    ,  10  ,    10 ,     10   , 10  ,   10   ,  10   , 10 ,    10  ,  10,     10,    10,   10   ,  10,    10];


 % sensor_delay = zeros(1,100)+8;
  
if flag == 0
    return;
else
    for i = 1:100
        if sensor_delay(i)< (sensor_task(i)/fog_speed(sensor_link_fog(i)))
            flag = 0;
            break;
        end
      % (sensor_task(i)/fog_speed(sensor_link_fog(i)))
    end
end
